[tools]
cue = "latest"

[[watch_files]]
#patterns = ["../watch/*"]
#run = "echo file changed"
patterns = ["../../repo-forge/blueprints/default/*"]
run = "echo Files Changed; cp ../../repo-forge/blueprints/default/* ~/dev/personal/tmp/forge-child/"

[tasks.init]
description = "Initialize CUE module for this repo and fetch repo-forge templates (idempotent)"
depends     = ["init:module"]

[tasks."init:module"]
description = "Create cue.mod if missing, add templates module, tidy"
run = [
  "test -d cue.mod || cue mod init \"github.com/repsejnworb/${PWD##*/}\"",
  "cue mod get github.com/repsejnworb/repo-forge/templates@v0.1.0",
  "cue mod tidy"
]